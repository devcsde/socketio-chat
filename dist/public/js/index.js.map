{"version":3,"sources":["../../../public/js/index.js"],"names":["socket","io","on","console","log","message","li","$","text","from","append","a","attr","url","e","preventDefault","messageTextbox","emit","val","locationButton","navigator","geolocation","alert","getCurrentPosition","position","removeAttr","latitude","coords","longitude"],"mappings":";;AAAA,IAAIA,SAASC,IAAb;;AAEAD,OAAOE,EAAP,CAAU,SAAV,EAAqB,YAAU;AAC3BC,YAAQC,GAAR,CAAY,qBAAZ;AACH,CAFD;;AAIAJ,OAAOE,EAAP,CAAU,YAAV,EAAwB,YAAU;AAC9BC,YAAQC,GAAR,CAAY,0BAAZ;AACH,CAFD;;AAIAJ,OAAOE,EAAP,CAAU,YAAV,EAAwB,UAACG,OAAD,EAAa;AACjCF,YAAQC,GAAR,CAAY,aAAZ,EAA2BC,OAA3B;AACA,QAAIC,KAAKC,EAAE,WAAF,CAAT;AACAD,OAAGE,IAAH,CAAWH,QAAQI,IAAnB,UAA4BJ,QAAQG,IAApC;AACAD,MAAE,WAAF,EAAeG,MAAf,CAAsBJ,EAAtB;AACH,CALD;;AAOAN,OAAOE,EAAP,CAAU,oBAAV,EAAgC,UAACG,OAAD,EAAa;AACzC,QAAIC,KAAKC,EAAE,WAAF,CAAT;AACA,QAAII,IAAIJ,EAAE,4CAAF,CAAR;;AAEAD,OAAGE,IAAH,CAAWH,QAAQI,IAAnB;AACAE,MAAEC,IAAF,CAAO,MAAP,EAAeP,QAAQQ,GAAvB;AACAP,OAAGI,MAAH,CAAUC,CAAV;AACAJ,MAAE,WAAF,EAAeG,MAAf,CAAsBJ,EAAtB;AAEH,CATD;;AAWAC,EAAE,eAAF,EAAmBL,EAAnB,CAAsB,QAAtB,EAAgC,UAAUY,CAAV,EAAa;AAC1CA,MAAEC,cAAF;;AAEA,QAAIC,iBAAiBT,EAAE,gBAAF,CAArB;AACAP,WAAOiB,IAAP,CAAY,eAAZ,EAA6B;AACzBR,cAAM,MADmB;AAExBD,cAAMQ,eAAeE,GAAf;AAFkB,KAA7B,EAGI,YAAY;AACZF,uBAAeE,GAAf,CAAmB,EAAnB;AACH,KALD;AAMF,CAVD;;AAYA,IAAIC,iBAAiBZ,EAAE,gBAAF,CAArB;AACAY,eAAejB,EAAf,CAAkB,OAAlB,EAA2B,YAAY;AACpC,QAAG,CAACkB,UAAUC,WAAd,EAA2B;AACvB,eAAOC,MAAM,4CAAN,CAAP;AACH;;AAEJH,mBAAeP,IAAf,CAAoB,UAApB,EAAgC,UAAhC,EAA4CJ,IAA5C,CAAiD,qBAAjD;;AAEGY,cAAUC,WAAV,CAAsBE,kBAAtB,CAAyC,UAAUC,QAAV,EAAoB;AACzDL,uBAAeM,UAAf,CAA0B,UAA1B,EAAsCjB,IAAtC,CAA2C,eAA3C;AACAR,eAAOiB,IAAP,CAAY,uBAAZ,EAAqC;AACjCS,sBAAUF,SAASG,MAAT,CAAgBD,QADO;AAEjCE,uBAAWJ,SAASG,MAAT,CAAgBC;AAFM,SAArC;AAIH,KAND,EAMG,YAAY;AACXT,uBAAeM,UAAf,CAA0B,UAA1B,EAAsCjB,IAAtC,CAA2C,eAA3C;AACAc,cAAM,2BAAN;AACH,KATD;AAUF,CAjBD","file":"index.js","sourcesContent":["let socket = io();\r\n\r\nsocket.on(\"connect\", function(){\r\n    console.log(\"Connected to server\");\r\n});\r\n\r\nsocket.on(\"disconnect\", function(){\r\n    console.log(\"Disconnected from server\");\r\n});\r\n\r\nsocket.on(\"newMessage\", (message) => {\r\n    console.log(\"New message\", message);\r\n    let li = $(\"<li></li>\");\r\n    li.text(`${message.from}: ${message.text}`);\r\n    $(\"#messages\").append(li);\r\n});\r\n\r\nsocket.on(\"newLocationMessage\", (message) => {\r\n    let li = $(\"<li></li>\");\r\n    let a = $(\"<a target='_blank'>My current location</a>\");\r\n\r\n    li.text(`${message.from}: `);\r\n    a.attr(\"href\", message.url);\r\n    li.append(a);\r\n    $(\"#messages\").append(li);\r\n    \r\n});\r\n\r\n$(\"#message-form\").on(\"submit\", function (e) {\r\n   e.preventDefault();\r\n\r\n   let messageTextbox = $(\"[name=message]\");\r\n   socket.emit(\"createMessage\", {\r\n       from: \"User\",\r\n        text: messageTextbox.val()\r\n    }, function () {\r\n       messageTextbox.val(\"\");\r\n   });\r\n});\r\n\r\nvar locationButton = $(\"#send-location\");\r\nlocationButton.on(\"click\", function () {\r\n   if(!navigator.geolocation) {\r\n       return alert(\"Geolocation not supported by your browser.\")\r\n   }\r\n\r\nlocationButton.attr(\"disabled\", \"disabled\").text(\"Sending location...\");\r\n\r\n   navigator.geolocation.getCurrentPosition(function (position) {\r\n       locationButton.removeAttr(\"disabled\").text(\"Send location\");\r\n       socket.emit(\"createLocationMessage\", {\r\n           latitude: position.coords.latitude,\r\n           longitude: position.coords.longitude\r\n       });\r\n   }, function () {\r\n       locationButton.removeAttr(\"disabled\").text(\"Send location\");\r\n       alert(\"Unable to fetch location.\")\r\n   });\r\n});"]}