{"version":3,"sources":["../../../public/js/index.js"],"names":["socket","io","on","console","log","message","formattedTime","moment","createdAt","format","li","$","text","from","append","a","attr","url","e","preventDefault","messageTextbox","emit","val","locationButton","navigator","geolocation","alert","getCurrentPosition","position","removeAttr","latitude","coords","longitude"],"mappings":";;AAAA,IAAIA,SAASC,IAAb;;AAEAD,OAAOE,EAAP,CAAU,SAAV,EAAqB,YAAU;AAC3BC,YAAQC,GAAR,CAAY,qBAAZ;AACH,CAFD;;AAIAJ,OAAOE,EAAP,CAAU,YAAV,EAAwB,YAAU;AAC9BC,YAAQC,GAAR,CAAY,0BAAZ;AACH,CAFD;;AAIAJ,OAAOE,EAAP,CAAU,YAAV,EAAwB,UAACG,OAAD,EAAa;AACjC,QAAIC,gBAAgBC,OAAOF,QAAQG,SAAf,EAA0BC,MAA1B,CAAiC,MAAjC,CAApB;;AAEA,QAAIC,KAAKC,EAAE,WAAF,CAAT;AACAD,OAAGE,IAAH,CAAWP,QAAQQ,IAAnB,UAA4BP,aAA5B,UAA8CD,QAAQO,IAAtD;AACAD,MAAE,WAAF,EAAeG,MAAf,CAAsBJ,EAAtB;AACH,CAND;;AAQAV,OAAOE,EAAP,CAAU,oBAAV,EAAgC,UAACG,OAAD,EAAa;AACzC,QAAIC,gBAAgBC,OAAOF,QAAQG,SAAf,EAA0BC,MAA1B,CAAiC,MAAjC,CAApB;AACA,QAAIC,KAAKC,EAAE,WAAF,CAAT;AACA,QAAII,IAAIJ,EAAE,4CAAF,CAAR;;AAEAD,OAAGE,IAAH,CAAWP,QAAQQ,IAAnB,UAA4BP,aAA5B;AACAS,MAAEC,IAAF,CAAO,MAAP,EAAeX,QAAQY,GAAvB;AACAP,OAAGI,MAAH,CAAUC,CAAV;AACAJ,MAAE,WAAF,EAAeG,MAAf,CAAsBJ,EAAtB;AAEH,CAVD;;AAYAC,EAAE,eAAF,EAAmBT,EAAnB,CAAsB,QAAtB,EAAgC,UAAUgB,CAAV,EAAa;AAC1CA,MAAEC,cAAF;;AAEA,QAAIC,iBAAiBT,EAAE,gBAAF,CAArB;AACAX,WAAOqB,IAAP,CAAY,eAAZ,EAA6B;AACzBR,cAAM,MADmB;AAExBD,cAAMQ,eAAeE,GAAf;AAFkB,KAA7B,EAGI,YAAY;AACZF,uBAAeE,GAAf,CAAmB,EAAnB;AACH,KALD;AAMF,CAVD;;AAYA;AACA,IAAIC,iBAAiBZ,EAAE,gBAAF,CAArB;AACAY,eAAerB,EAAf,CAAkB,OAAlB,EAA2B,YAAY;AACpC,QAAG,CAACsB,UAAUC,WAAd,EAA2B;AACvB,eAAOC,MAAM,4CAAN,CAAP;AACH;;AAEJH,mBAAeP,IAAf,CAAoB,UAApB,EAAgC,UAAhC,EAA4CJ,IAA5C,CAAiD,qBAAjD;;AAEGY,cAAUC,WAAV,CAAsBE,kBAAtB,CAAyC,UAAUC,QAAV,EAAoB;AACzDL,uBAAeM,UAAf,CAA0B,UAA1B,EAAsCjB,IAAtC,CAA2C,eAA3C;AACAZ,eAAOqB,IAAP,CAAY,uBAAZ,EAAqC;AACjCS,sBAAUF,SAASG,MAAT,CAAgBD,QADO;AAEjCE,uBAAWJ,SAASG,MAAT,CAAgBC;AAFM,SAArC;AAIH,KAND,EAMG,YAAY;AACXT,uBAAeM,UAAf,CAA0B,UAA1B,EAAsCjB,IAAtC,CAA2C,eAA3C;AACAc,cAAM,2BAAN;AACH,KATD;AAUF,CAjBD","file":"index.js","sourcesContent":["let socket = io();\r\n\r\nsocket.on(\"connect\", function(){\r\n    console.log(\"Connected to server\");\r\n});\r\n\r\nsocket.on(\"disconnect\", function(){\r\n    console.log(\"Disconnected from server\");\r\n});\r\n\r\nsocket.on(\"newMessage\", (message) => {\r\n    let formattedTime = moment(message.createdAt).format(\"H:mm\");\r\n\r\n    let li = $(\"<li></li>\");\r\n    li.text(`${message.from}, ${formattedTime}: ${message.text}`);\r\n    $(\"#messages\").append(li);\r\n});\r\n\r\nsocket.on(\"newLocationMessage\", (message) => {\r\n    let formattedTime = moment(message.createdAt).format(\"H:mm\");\r\n    let li = $(\"<li></li>\");\r\n    let a = $(\"<a target='_blank'>My current location</a>\");\r\n\r\n    li.text(`${message.from}, ${formattedTime}: `);\r\n    a.attr(\"href\", message.url);\r\n    li.append(a);\r\n    $(\"#messages\").append(li);\r\n    \r\n});\r\n\r\n$(\"#message-form\").on(\"submit\", function (e) {\r\n   e.preventDefault();\r\n\r\n   let messageTextbox = $(\"[name=message]\");\r\n   socket.emit(\"createMessage\", {\r\n       from: \"User\",\r\n        text: messageTextbox.val()\r\n    }, function () {\r\n       messageTextbox.val(\"\");\r\n   });\r\n});\r\n\r\n// location & button\r\nvar locationButton = $(\"#send-location\");\r\nlocationButton.on(\"click\", function () {\r\n   if(!navigator.geolocation) {\r\n       return alert(\"Geolocation not supported by your browser.\")\r\n   }\r\n\r\nlocationButton.attr(\"disabled\", \"disabled\").text(\"Sending location...\");\r\n\r\n   navigator.geolocation.getCurrentPosition(function (position) {\r\n       locationButton.removeAttr(\"disabled\").text(\"Send location\");\r\n       socket.emit(\"createLocationMessage\", {\r\n           latitude: position.coords.latitude,\r\n           longitude: position.coords.longitude\r\n       });\r\n   }, function () {\r\n       locationButton.removeAttr(\"disabled\").text(\"Send location\");\r\n       alert(\"Unable to fetch location.\")\r\n   });\r\n});"]}